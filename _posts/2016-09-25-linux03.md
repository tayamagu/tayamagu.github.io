---
layout: post
title: 第3章 Linux とは
date: 2016-09-25
tags: Linux
category: Linux
---

# 第3章 基本的なコマンド1
## ファイル操作
### ファイルとディレクトリ
データをコンピュータ上に保存しておく方法として、ファイルという形式が用いられる。

ファイルの数が増えると内容や用途といった目的別に分ける必要が出てくる。  
この時必要になるのが、**ディレクトリ**という考えである。

 ![基本ソフト](https://raw.githubusercontent.com/tayamagu/tayamagu.github.io/master/images/linux02_01.png)

`ディレクトリは複数のファイルをまとめておくことが出来る`

### ファイルやディレクトリの参照 (ls)
**lsコマンド**では、ファイル名やディレクトリ名を指定して情報を取得することができる。  
ディレクトリ名を指定した場合、そのディレクトリ名にあるファイルやディレクトリ名の一覧を取得できる

`* と ? をワイルドカードとして使うこともできる`

書式
```
ls [オプション] [ファイル]
```
オプション
```
-a
.で始まる隠しファイルもすべて(ALL)出力する

-l
長(Long)形式で出力する

-t
最終更新時間(Time)によって、ソートして出力する

-r
逆順(Reverse)にソートして出力する
```

**ワイルドカードの使い方**  
<例>  
hosts. のあとに**何らかの**名前がつくファイルを絞り込み
```
ls hosts.*
↓
hosts.deny  hosts.allow
```
hosts. のあとに**4文字含まれる**ファイルを絞り込み
```
ls hosts.????
↓
hosts.deny
```
hosts. のあとに4文字+最後の文字ふぁ「ｗ」であるファイルを絞り込み
```
hosts.????w
↓
hosts.allow
```

### オプションの同時指定と順序
オプションは、まとめてもまとめなくても同じ結果になる。  
　`※コマンドによっては順序と文法が細かく決まっている場合がある`
```
$ ls -la
$ ls -al
$ ls -l -a
$ ls -a -l
```
コマンドによってはハイフンを必要としないコマンドもあるため、注意が必要。

### ファイルのコピー (cp)
**cpコマンド**でファイルを複製し、新しくできた複製ファイルのファイル名を指定できる。  

書式
```
cp [オプション] コピー元 コピー先
```

実行例
```
$ cp src-file dst-file
```
- **ファイル名を別名のファイルとしてコピー**  
src-fileがファイル名で、dst-fileが存在しない場合、src-fileのコピーとしてdst-fileが作成される。

- **ファイル名をディレクトリにコピー**  
src-fileがファイル名で、dst-fileがディレクトリの場合、dst-fileの下にsrc-fileのコピーが作成される。

- **ファイルを新しいファイルで上書き**  
src-fileがファイル名で、dst-fileが存在するファイル名の場合、ファイルdst-fileはsrc-fileのコピーで上書きされる。

オプション
```
-i
コンピュータが確認のための問い合わせをしてくる。
誤って上書きコピーしないよう防ぐことができる。

-r
ディレクトリの中にあるすべてのファイル・ディレクトリに対してコピーを行う。

-p
所有者・属性・更新日時など、元ファイルの情報のままコピーする。
```

### ファイルの移動 (mv)
ファイルを移動するときに利用するコマンドがmvコマンド。  
また、mvコマンドを使ってファイル名の変更も行える。  

書式
```
mv 移動元ファイル 移動先ファイル
```

オプション
```
-i
処理を行う時に確認メッセージが表示される。

-p
強制的に処理を実行する。
```

### ファイルの削除
ファイルを削除したい時に利用するコマンドが、rmコマンド。  

書式
```
rm ファイル名
```

オプション
```
-i
処理を行う時に確認メッセージが表示される。

-f
強制的に処理を実行する。

-r
ディレクトリを対象にし、中のファイルやディレクトリも削除する。
```
UNIX系OSでは、一度削除したファイルは元に戻せない。  
また、rmコマンドでは（オプション無しでは）ディレクトリを削除することが出来ない。

ディレクトリの削除は、rmdirコマンドで説明する（後述）

## ディレクトリの操作
### 現在のディレクトリの表示
ディレクトリは階層構造になっていて、その中で現在どの位置にいるか表示するのが pwdコマンド。

書式
```
pwd
```

### ディレクトリの変更 (cd)
cdコマンドを実行すると、現在いるディレクトリを変更することができる。

書式
```
cd [ディレクトリ名]
```

### ディレクトリの作成 (mkdir)
mkdirコマンドを実行すると、ディレクトリを作成できる。

書式
```
mkdir ディレクトリ名
```

オプション
```
-p
指定されたディレクトリの上位ディレクトリも作成する
```

  
**ディレクトリ dir1 の下に dir2 さらにその下に dir3 を作りたい時**

オプション無し
```
$ mkdir dir1
$ mkdir dir1/dir2
$ mkdir dir1/dir2/dir3
```

オプション有り
```
$ mkdir -p dir1/dir2/dir3
```
-pを使うと一度に作成できる

### ディレクトリの削除
ディレクトリを削除する、rmdirコマンド。

書式
```
rmdir ディレクトリ名
```

オプション
```
-p
指定した階層までのディレクトリを一括で削除する。
オプション無しだと、最下層のディレクトリのみ削除する。
（いずれもディレクトリの中は空でなければいけない）

（例） dir1/dir2 ディレクトリを一括で削除
　　　 rmdir -p dir1/dir2
```
rmdirの特徴は、「中が空の場合」削除されない。  

### 特別なディレクトリ
ディレクトリの中で特別なディレクトリやそれを表す記号がある。  

- **カレントディレクトリ (.)**  
現在いる位置のこと。ドットを使て表している。  

- **親ディレクトリ**  
1階層上のディレクトリ。 home/penguin　の場合、home が親ディレクトリ。  

- **ホームディレクトリ**  
ユーザの作業開始位置。ログイン後のユーザは必ずホームディレクトリにいる。  

- **ルートディレクトリ**  
ディレクトリ階層の最上位階層  

### 絶対（パス）指定と相対（パス）指定  
カレントディレクトリが usr/localであるとする、このとき usr/bin/xxx のファイルを指定するには次の2通りが存在する。  
  
1通り目  

** usr/bin/xxx **  

2通り目  

** ../bin/xxx **  

1通り目は、最上位のディレクトリ（ / ）からディレクトリ・ファイル名を指定している。  
2通り目は、「自分が現在いる場所から見て」ディレクトリ・ファイル名を指定している。

1通り目を**絶対（パス）指定**  
2通り目を**相対（パス）指定** という

## ファイルの内容を表示
### ファイルの内容 (cat)
ファイルの内容を確認するコマンドの一つ。 catコマンド  

書式
```
cat ファイル名
```

オプション
```
-n
行番号を付加して表示する
```

### ページャを使った表示
catコマンドでファイルの内容を表示する時、行数が多く表示が流れてしまうことがある。

それを流れないようにしてくれる、途中で止めてくれることを「**ページング**」という。  
代表的なページャとしては、**`more`** や **`less`** コマンドが上げられる。

書式
```
more ファイル名
less ファイル名
```

※ ページャコマンドでは、次のコマンドで操作することができる。  

 ![基本ソフト](https://raw.githubusercontent.com/tayamagu/tayamagu.github.io/master/images/linux02_02.png)

### ファイルの検索 (find)
ファイルがどこのディレクトリにあるか **findコマンド**で検索できる。

書式
```
find パス -name ファイル名
```

## コマンドのパス
### コマンドのパスを表示 (which)
whichコマンドを用いると、PATH環境変数に含まれるディレクトリは以下に配置されているコマンドのパスを表示することができる。

書式
```
which コマンド名
```
コマンドが存在するディレクトリがPATH環境変数に含まれていないと、whichコマンドはエラーになる。

例えば、管理者権限が必要なコマンドへのパスは一般ユーザでは設定されていないため、whichコマンドでは確認できないことがある。

### ヘルプの使い方　(help)
実行したいコマンドに対して、--helpオプションなどをつけて実行することで、コマンドの実行に使えるオプションを調べることができる。

書式
```
コマンド --help
```

### マニュアルの使い方 (man)
Linuxにはオンラインマニュアルが含まれている。

書式
```
man コマンド名
```
オプション
```
-k
`単語`が含まれるエントリー一覧を出力する
```
オンラインマニュアルには以下の項目が含まれている。

**説明**  
このプログラムに関する説明。

**POSIX/GNUオプション**  
プログラムで利用可能なオプション。
指定したオプションによってプログラムの動作が変わる。

**関連項目**  
このプログラムに関連しているコマンドや、他の機能。  
ここに列挙している内容をmanコマンドで調べることができる。

**注意**  
このプログラムに関する注意事項やバグの報告先などの情報が書かれている。  
その他、コマンドによりマニュアルに様々な項目が表示される。

### セクション
マニュアルの内容を分野毎に分け、その分野を指定したもの。  
セクションには番号がついており、以下の表のようになっている。

 ![基本ソフト](https://raw.githubusercontent.com/tayamagu/tayamagu.github.io/master/images/linux02_03.png)

